<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Matrixq</title>
    <link rel="shortcut icon" href="img/logo.jpeg" />
    <!-- Boxicons CSS -->
    <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <link href='https://cdn.boxicons.com/fonts/brands/boxicons-brands.min.css' rel='stylesheet'>
    <!-- Load font awesome icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- owl carousel libraries cho hình nhỏ -->
    <link rel="stylesheet" href="js/owlcarousel/owl.carousel.min.css">
    <link rel="stylesheet" href="js/owlcarousel/owl.theme.default.min.css">
    <script src="js/Jquery/Jquery.min.js"></script>
    <script src="js/owlcarousel/owl.carousel.min.js"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- our files -->
    <!-- css -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/topnav.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/taikhoan.css">
    <link rel="stylesheet" href="css/trangchu.css">
    <link rel="stylesheet" href="css/home_products.css">
    <link rel="stylesheet" href="css/chitietsanpham.css">
    <link rel="stylesheet" href="css/footer.css">
    <!-- js -->
    <script src="data/products.js"></script>
    <script src="js/classes.js"></script>
    <script src="js/dungchung.js"></script>
    <script src="js/chitietsanpham.js"></script>
</head>

<body>

    <script> addTopNav(); </script>
    <script> addHeader(); </script>
    <div class="container detais-product">
        <div id="productNotFound" style="min-height: 50vh; text-align: center; margin: 50px; display: none;">
            <h1 style="color: red; margin-bottom: 10px;">Không tìm thấy sản phẩm</h1>
            <a href="index.html" style="text-decoration: underline;">Quay lại trang chủ</a>
        </div>

        <div class="chitietSanpham" style="margin-bottom: 100px">
            <h1 style="margin-top: 20px;"></h1>
            <div class="rating" style="display: none;"></div>
            <div class="rowdetail group">
                <div class="picture">
                    <img id="sourceImg" src="" onclick="opencertain()">
                    <div id="zoomCircle"></div>
                    <div class="area_order">
                        <!-- nameProduct là biến toàn cục được khởi tạo giá trị trong phanTich_URL_chiTietSanPham -->
                        <!-- onclick="themVaoGioHang(maProduct, nameProduct);  " -->
                        <a class="buy_now" onclick="openBuyNow()">

                            <b><i class="fa fa-cart-plus"></i> Mua ngay</b>
                        </a>
                        <a href="tel:0983976896">
                            <div class="phone-buy-now"
                                style="display: flex;padding: 10px 10px 10px 20px; border-radius: 13px;border: 1px dashed #ccc;
                            align-items: center; gap: 20px; font-size: 18px; color: #3b6610;font-weight: 600; margin-top: 20px;">
                                <i class='bx  bx-phone-outgoing' style="font-size: 37px; color: #009ada;"></i>
                                Gọi ngay: <span style="color: red; font-size: 23px;">0947 086 705</span>
                            </div>
                        </a>


                    </div>
                </div>
                <!-- Modal zoom cạnh chuột -->
                <div class="price_sale">
                    <div class="area_price"> </div>
                    <div class="ship" style="display: none;">
                        <img src="img/chitietsanpham/clock-152067_960_720.png">
                        <div>NHẬN HÀNG TRONG 1 GIỜ</div>
                    </div>
                    <!-- <div class="area_promo">
                        <strong>khuyến mãi</strong>
                        <div class="promo">
                            <img src="img/chitietsanpham/icon-tick.png">
                            <div id="detailPromo"> </div>
                        </div>
                    </div> -->
                    <!-- <div class="policy">
                        <div>
                            <img src="img/chitietsanpham/box.png">
                            <p>Trong hộp có: Sạc, Tai nghe, Sách hướng dẫn, Cây lấy sim, Ốp lưng </p>
                        </div>
                        <div>
                            <img src="img/chitietsanpham/icon-baohanh.png">
                            <p>Bảo hành chính hãng 12 tháng.</p>
                        </div>
                        <div class="last">
                            <img src="img/chitietsanpham/1-1.jpg">
                            <p>1 đổi 1 trong 1 tháng nếu lỗi, đổi sản phẩm tại nhà trong 1 ngày.</p>
                        </div>
                    </div> -->

                    <div class="mockup-buy-product" id="buyNowPopup">

                        <div class="order-box Animate-item" id="buyNowBox">
                            <div class="name-pr">
                                <div class="order-header">
                                    <h2> <span>Dầu động cơ hàng hải Mobilgard 300C</span></h2>
                                </div>
                                <span class="close-popup" onclick="closeBuyNow()">&times;</span>
                            </div>

                            <div class="order-content container">
                                <!-- Sản phẩm -->
                                <div class="product">
                                    <img src="https://via.placeholder.com/120" alt="Mobilgard 300C">
                                    <h3>Dầu động cơ hàng hải Mobilgard 300C</h3>
                                    <div class="hotline">Hotline: 0947.086.705</div>
                                    <p class="desc">Vui lòng nhập đúng số điện thoại để chúng tôi liên hệ xác nhận đơn
                                        hàng trước khi giao.</p>
                                </div>

                                <!-- Form -->
                                <div class="customer-form">
                                    <h4>Thông tin người mua</h4>

                                    <!-- Anh/Chị -->
                                    <div class="gender-row">
                                        <label><input type="radio" name="gender"> Anh</label>
                                        <label><input type="radio" name="gender"> Chị</label>
                                    </div>

                                    <!-- Họ tên + SĐT -->
                                    <div class="form-row">
                                        <input class="col" type="text" placeholder="Họ và tên">
                                        <input class="col" type="text" placeholder="Số điện thoại">
                                    </div>

                                    <input type="email" placeholder="Địa chỉ email">

                                    <!-- Tỉnh/TP + Quận/Huyện + Xã/Phường -->
                                    <div class="form-row">
                                        <select id="province" class="col">
                                            <option value="">Tỉnh/Thành phố</option>
                                        </select>
                                        <select id="district" class="col">
                                            <option value="">Quận/Huyện</option>
                                        </select>
                                        <select id="ward" class="col">
                                            <option value="">Xã/Phường</option>
                                        </select>
                                    </div>

                                    <input type="text" placeholder="Số nhà, tên đường">
                                    <textarea placeholder="Ghi chú đơn hàng (Không bắt buộc)"></textarea>

                                    <button class="btn-submit">ĐẶT HÀNG NGAY</button>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="info_product">
                    <h2>Thông số kỹ thuật</h2>
                    <ul class="info">

                    </ul>
                </div>
                <div class="support-boxs">
                    <div class="support-box">
                        <div class="support-item">
                            <div class="icon"><i class="fa fa-truck"></i></div>
                            <div class="text">SHIPCODE TOÀN QUỐC</div>
                        </div>
    
                        <div class="support-item">
                            <div class="icon"><i class="fa fa-home"></i></div>
                            <div class="text">THANH TOÁN TIỀN MẶT HOẶC<br>CHUYỂN KHOẢN</div>
                        </div>
    
                        <div class="support-item">
                            <div class="icon"><i class="fa fa-phone"></i></div>
                            <div class="text">
                            TỔNG ĐÀI CSKH 8H00 - 17H00<br>
                            <span class="hotline">0947 086 705</span>
                            </div>
                        </div>
                    </div>
                    <div class="calendar-box">
                        <div class="calendar-header">LỊCH VẠN NIÊN</div>

                        <div class="calendar-today" id="todayBox"></div>
                        <div class="calendar-info" id="infoBox"></div>

                        <div class="month-switch">
                        <button onclick="prevMonth()">&lt;&lt;</button>
                        <span id="monthLabel"></span>
                        <button onclick="nextMonth()">&gt;&gt;</button>
                        </div>

                        <table id="calendarTable"></table>
                    </div>
                </div>

            </div>
            <div id="overlaycertainimg" class="overlaycertainimg">
                <div class="close" onclick="closecertain()">&times;</div>
                <div class="overlaycertainimg-content">
                    <img id="bigimg" class="bigimg" src="img/chitietsanpham/oppo-f9-red-2-400x460.png">
                    <div class="div_smallimg owl-carousel">
                        <!-- <img src="img/chitietsanpham/oppo-f9-mau-do-1-org.jpg" onclick="changepic(this.src)">
                        <img src="img/chitietsanpham/oppo-f9-mau-do-2-org.jpg" onclick="changepic(this.src)">
                        <img src="img/chitietsanpham/oppo-f9-mau-do-3-org.jpg" onclick="changepic(this.src)"> -->
                    </div>
                </div>
            </div>
        </div>
        <div class="section-title">
            <div class="label">MÔ TẢ SẢN PHẨM</div>
            <div class="line"></div>
        </div>

        <div class="title-product-mains" id="titleProductMains">
            

        </div>
        <div id="goiYSanPham"></div>
    </div>

    <script>addContainTaiKhoan();</script>
    <div class="faq-container container">
        <h2>CÂU HỎI THƯỜNG GẶP VỀ DẦU MÁY</h2>

        <div class="faq-item">
            <button class="faq-question" onclick="openQuestion(this)">
                Dầu máy là gì? <i class="fa-solid fa-chevron-right"></i>
            </button>
            <div class="faq-answer">
                <p>Dầu máy là loại dầu bôi trơn dùng trong động cơ hoặc máy móc, có tác dụng giảm ma sát, làm mát, chống
                    gỉ sét và tăng tuổi thọ cho thiết bị.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" onclick="openQuestion(this)">
                Bao lâu thì nên thay dầu máy? <i class="fa-solid fa-chevron-right"></i>
            </button>
            <div class="faq-answer">
                <p>Tùy theo loại máy và điều kiện sử dụng, thường thì nên thay dầu sau 3.000 - 5.000 km đối với xe máy,
                    hoặc 5.000 - 10.000 km đối với ô tô. Với máy công nghiệp, thời gian thay phụ thuộc vào số giờ vận
                    hành.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" onclick="openQuestion(this)">
                Có thể dùng chung dầu cho nhiều loại máy khác nhau không? <i class="fa-solid fa-chevron-right"></i>
            </button>
            <div class="faq-answer">
                <p>Không nên. Mỗi loại máy có yêu cầu dầu khác nhau về độ nhớt, thành phần và tính năng. Sử dụng sai dầu
                    có thể gây hư hỏng máy.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" onclick="openQuestion(this)">
                Dầu tổng hợp khác gì so với dầu khoáng? <i class="fa-solid fa-chevron-right"></i>
            </button>
            <div class="faq-answer">
                <p>Dầu tổng hợp có độ bền nhiệt và khả năng bảo vệ động cơ tốt hơn dầu khoáng. Tuy nhiên, giá thành
                    thường cao hơn. Dầu khoáng phù hợp cho máy móc phổ thông, dầu tổng hợp phù hợp cho máy hoạt động
                    nặng hoặc tốc độ cao.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" onclick="openQuestion(this)">
                Làm thế nào để bảo quản dầu máy? <i class="fa-solid fa-chevron-right"></i>
            </button>
            <div class="faq-answer">
                <p>Bảo quản dầu ở nơi khô ráo, thoáng mát, tránh ánh nắng trực tiếp và nhiệt độ cao. Đậy kín nắp sau khi
                    sử dụng để tránh nhiễm bụi bẩn và ẩm mốc.</p>
            </div>
        </div>
    </div>
    <div class="container carts-detail">
        <div class="row">
            <div class="col-12 col-sm-6 col-md-3 col-lg-3">
                <div class="cards">
                    <i class="fas fa-truck"></i>
                    <h4>MIỄN PHÍ VẬN CHUYỂN</h4>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-3 col-lg-3">
                <div class="cards">
                    <i class="fas fa-headset"></i>
                    <h4>TƯ VẤN 24/7</h4>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-3 col-lg-3">
                <div class="cards">
                    <i class="fas fa-gem"></i>
                    <h4>SẢN PHẨM ĐA DẠNG</h4>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-3 col-lg-3">
                <div class="cards">
                    <i class="fas fa-shield-alt"></i>
                    <h4>UY TÍN HÀNG ĐẦU</h4>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <script>addFooter();</script>
    </div>

    <script>
        const PI = Math.PI;

    function INT(d) { return Math.floor(d); }

    function jdFromDate(dd, mm, yy) {
      let a = INT((14 - mm) / 12);
      let y = yy+4800-a;
      let m = mm+12*a-3;
      let jd = dd + INT((153*m+2)/5) + 365*y + INT(y/4) - INT(y/100) + INT(y/400) - 32045;
      if (jd < 2299161) {
        jd = dd + INT((153*m+2)/5) + 365*y + INT(y/4) - 32083;
      }
      return jd;
    }

    function jdToDate(jd) {
      let a, b, c, d, e, m;
      if (jd > 2299160) {
        a = jd + 32044;
        b = INT((4*a+3)/146097);
        c = a - INT((b*146097)/4);
      } else {
        b = 0;
        c = jd + 32082;
      }
      d = INT((4*c+3)/1461);
      e = c - INT((1461*d)/4);
      m = INT((5*e+2)/153);
      let day = e - INT((153*m+2)/5) + 1;
      let month = m + 3 - 12*INT(m/10);
      let year = b*100 + d - 4800 + INT(m/10);
      return [day, month, year];
    }

    function getNewMoonDay(k, timeZone) {
      let T = k/1236.85;
      let T2 = T*T;
      let T3 = T2*T;
      let dr = PI/180;
      let Jd1 = 2415020.75933 + 29.53058868*k + 0.0001178*T2 - 0.000000155*T3;
      Jd1 += 0.00033*Math.sin((166.56+132.87*T-0.009173*T2)*dr);
      let M = 359.2242 + 29.10535608*k - 0.0000333*T2 - 0.00000347*T3;
      let Mpr = 306.0253 + 385.81691806*k + 0.0107306*T2 + 0.00001236*T3;
      let F = 21.2964 + 390.67050646*k - 0.0016528*T2 - 0.00000239*T3;
      let C1=(0.1734-0.000393*T)*Math.sin(M*dr)+0.0021*Math.sin(2*dr*M);
      C1 = C1 - 0.4068*Math.sin(Mpr*dr)+0.0161*Math.sin(dr*2*Mpr);
      C1 = C1-0.0004*Math.sin(dr*3*Mpr);
      C1 = C1+0.0104*Math.sin(dr*2*F)-0.0051*Math.sin(dr*(M+Mpr));
      C1 = C1-0.0074*Math.sin(dr*(M-Mpr))+0.0004*Math.sin(dr*(2*F+M));
      C1 = C1-0.0004*Math.sin(dr*(2*F-M))-0.0006*Math.sin(dr*(2*F+Mpr));
      C1 = C1+0.0010*Math.sin(dr*(2*F-Mpr))+0.0005*Math.sin(dr*(2*M+Mpr));
      let deltat;
      if (T< -11) deltat= 0.001+0.000839*T+0.0002261*T2-0.00000845*T3-0.000000081*T*T3;
      else deltat= -0.000278+0.000265*T+0.000262*T2;
      let JdNew = Jd1+C1-deltat;
      return INT(JdNew+0.5+timeZone/24);
    }

    function getSunLongitude(jdn, timeZone) {
      let T = (jdn - 2451545.5 - timeZone/24) / 36525;
      let T2 = T*T;
      let dr = PI/180;
      let M = 357.52910 + 35999.05030*T - 0.0001559*T2 - 0.00000048*T*T2;
      let L0 = 280.46645 + 36000.76983*T + 0.0003032*T2;
      let DL = (1.914600 - 0.004817*T - 0.000014*T2)*Math.sin(dr*M);
      DL = DL + (0.019993 - 0.000101*T)*Math.sin(dr*2*M) + 0.000290*Math.sin(dr*3*M);
      let L = L0+DL;
      L = L*dr;
      L = L - 2*PI*INT(L/(2*PI));
      return INT(L/PI*6);
    }

    function getLunarMonth11(yy, timeZone) {
      let off = jdFromDate(31, 12, yy) - 2415021;
      let k = INT(off / 29.530588853);
      let nm = getNewMoonDay(k, timeZone);
      let sunLong = getSunLongitude(nm, timeZone);
      if (sunLong >= 9) nm = getNewMoonDay(k-1, timeZone);
      return nm;
    }

    function getLeapMonthOffset(a11, timeZone) {
      let k = INT(0.5 + (a11 - 2415021.076998695) / 29.530588853);
      let last = 0; let i = 1;
      let arc = getSunLongitude(getNewMoonDay(k+i, timeZone), timeZone);
      do {
        last = arc;
        i++;
        arc = getSunLongitude(getNewMoonDay(k+i, timeZone), timeZone);
      } while (arc != last && i < 14);
      return i-1;
    }

    function convertSolar2Lunar(dd, mm, yy, timeZone) {
      let dayNumber = jdFromDate(dd, mm, yy);
      let k = INT((dayNumber - 2415021.076998695) / 29.530588853);
      let monthStart = getNewMoonDay(k+1, timeZone);
      if (monthStart > dayNumber) monthStart = getNewMoonDay(k, timeZone);
      let a11 = getLunarMonth11(yy, timeZone);
      let b11 = a11;
      let lunarYear;
      if (a11 >= monthStart) {
        lunarYear = yy;
        a11 = getLunarMonth11(yy-1, timeZone);
      } else {
        lunarYear = yy+1;
        b11 = getLunarMonth11(yy+1, timeZone);
      }
      let lunarDay = dayNumber - monthStart + 1;
      let diff = INT((monthStart - a11)/29);
      let lunarMonth = diff+11;
      let lunarLeap = 0;
      if (b11 - a11 > 365) {
        let leapMonthDiff = getLeapMonthOffset(a11, timeZone);
        if (diff >= leapMonthDiff) {
          lunarMonth = diff+10;
          if (diff == leapMonthDiff) lunarLeap = 1;
        }
      }
      if (lunarMonth > 12) lunarMonth -= 12;
      if (lunarMonth >= 11 && diff < 4) lunarYear -= 1;
      return [lunarDay, lunarMonth, lunarYear, lunarLeap];
    }

    // --------------------------
    // VẼ LỊCH
    // --------------------------
    const weekdays = ["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"];
    let currentDate = new Date();
    let selectedCell = null;

    function renderCalendar(date) {
      const year = date.getFullYear();
      const month = date.getMonth();
      const today = new Date();

      document.getElementById("monthLabel").innerText = (month+1) + "/" + year;

      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month+1, 0).getDate();

      let html = "<tr>";
      for (let d of weekdays) html += `<th>${d}</th>`;
      html += "</tr><tr>";

      for (let i=0;i<firstDay;i++) html += "<td></td>";

      for (let d=1; d<=daysInMonth; d++) {
        const isToday = d === today.getDate() && month===today.getMonth() && year===today.getFullYear();
        html += `<td class="${isToday?"today":""}" onclick="selectDay(${d},${month},${year}, this)">${d}</td>`;
        if ((d+firstDay)%7===0) html += "</tr><tr>";
      }

      html += "</tr>";
      document.getElementById("calendarTable").innerHTML = html;

      selectDay(date.getDate(), month, year);
    }

    function selectDay(day, month, year, cell=null){
      if (selectedCell) selectedCell.classList.remove("selected");
      if (cell) {
        selectedCell = cell;
        selectedCell.classList.add("selected");
      }

      const weekday = weekdays[new Date(year, month, day).getDay()];
      const lunar = convertSolar2Lunar(day, month+1, year, 7); // múi giờ VN = GMT+7

      document.getElementById("todayBox").innerHTML = `
        <div class="day">${day}</div>
        <div class="weekday">${weekday}</div>
        <div class="lunar">Âm: ${lunar[0]}/${lunar[1]} (${lunar[3]?"Nhuận":""})</div>
      `;

      document.getElementById("infoBox").innerHTML = `
        Ngày âm: ${lunar[0]} tháng ${lunar[1]} năm ${lunar[2]} ${lunar[3]?"(Nhuận)":""}<br>
        (Thuật toán chuyển đổi chính xác)
      `;
    }

    function prevMonth(){ currentDate.setMonth(currentDate.getMonth()-1); renderCalendar(currentDate); }
    function nextMonth(){ currentDate.setMonth(currentDate.getMonth()+1); renderCalendar(currentDate); }

    renderCalendar(currentDate);
    </script>
    <!-- Boostrap CSS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>

</html>